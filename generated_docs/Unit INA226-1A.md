# Unit INA226-1A 原理图描述

---

## 原理图分析

好的，以下是根据 Unit INA226-1A 原理图的结构化技术描述：

### **主要芯片及其功能**

*   **INA226 (U3):** 该电路的核心是德州仪器（TI）的 INA226 芯片，它是一款高精度、双向电流/功率监测器。该芯片集成了16位ADC，通过I2C接口进行通信。在本电路中，它用于测量通过分流电阻的电流以及输入端的电压。
    *   **VBUS (pin 1):** 连接至直流输入端 `V_IN`，用于测量0-30V的输入电压。
    *   **VS (pin 2):** 连接至隔离电源 VCC_ISO，作为芯片的供电引脚。
    *   **GND (pin 3):** 连接至隔离地 GND_ISO。
    *   **SCL (pin 4) & SDA (pin 5):** I2C通信引脚，连接至I2C信号隔离器U1的隔离侧。
    *   **A0 (pin 7) & A1 (pin 8):** I2C地址选择引脚，均连接至隔离地GND_ISO。
    *   **IN- (pin 9) & IN+ (pin 10):** 差分电流采样输入引脚，跨接在分流电阻R3的两端，用于测量其上的电压降。

### **电路设计思想**

该电路的设计核心是实现测量端与主控端的完全电气隔离。通过使用隔离式DC-DC电源模块和数字信号隔离器，将主控接口（HY2.0-4P）与测量接口（VH3.96-4P）在电气上完全分开，确保了在高压或大电流测量时主控设备的安全性，并能有效抑制共模干扰。

### **供电与充电电路**

*   **主控侧供电:** 5V电源由HY2.0-4P接口（J1）的pin 3输入。
*   **电源保护:** 在5V输入线路上串联一个500mA的自恢复保险丝（F1），用于过流保护。
*   **电源隔离:** 采用B0505S-1W隔离式DC-DC转换器（U2），将主控侧输入的5V和GND转换为一组电气隔离的5V（VCC_ISO）和隔离地（GND_ISO）。
*   **隔离侧供电:** VCC_ISO为测量侧的所有器件供电，包括INA226芯片（U3）和I2C隔离器（U1）的隔离侧。
*   **电源滤波:**
    *   主控侧输入端使用电容C1 (10uF) 和 C2 (100nF) 进行滤波。
    *   隔离电源输出端使用电容C3 (10uF) 和 C4 (100nF) 为INA226芯片提供稳定的电源。

### **信号路径与电路连接关系**

*   **电流测量路径:** 待测电流从VH3.96-4P端子（J2）的`V_IN`（pin 1, 2）流入，经过一个80mΩ的精密分流电阻（R3），再从`V_OUT`（pin 3, 4）流出。INA226的`IN+`和`IN-`引脚分别连接在R3的两端，以测量电流产生的压降。
*   **电压测量路径:** VH3.96-4P端子（J2）的`V_IN`直接连接到INA226的`VBUS`引脚，参考地为隔离地GND_ISO，用于测量输入电压。
*   **输入保护:** 在测量输入端`V_IN`和隔离地GND_ISO之间并联了一个TVS二极管（D1），用于吸收瞬态过压，保护后级电路。

### **串口与通讯芯片**

*   **通讯协议:** 电路采用I2C协议与主控进行通信。
*   **通讯接口:** 通过HY2.0-4P（Grove）接口（J1）连接至主控，引脚定义为SCL、SDA、5V、GND。
*   **I2C信号隔离:** 使用了一颗CA-IS3020S数字隔离芯片（U1）来隔离I2C总线。
    *   **主控侧:** U1的SDA1和SCL1引脚连接至J1接口的SDA和SCL，由主控侧5V供电。线路上有R5和R6（均为4.7KΩ）作为上拉电阻。
    *   **隔离侧:** U1的SDA2和SCL2引脚连接至INA226芯片的SDA和SCL引脚，由隔离电源VCC_ISO供电。线路上有R7和R8（均为4.7KΩ）作为上拉电阻。

### **外设模块与接口**

*   **主控接口 (J1):** 一个HY2.0-4P标准接口，用于连接M5Stack主控，提供5V电源和I2C通信。
*   **测量接口 (J2):** 一个VH3.96-4P端子，用于连接待测电路。其中pin 1和pin 2并联为`V_IN`，pin 3和pin 4并联为`V_OUT`。

---

## 补充信息

根据原理图，以下为补充说明：

### **补充说明**

*   **I2C 地址配置:** INA226 芯片 (U3) 的地址选择引脚 A0 (pin 7) 和 A1 (pin 8) 均被连接至隔离地 GND_ISO。根据 INA226 的数据手册，此硬件配置将其 I2C 从设备地址固定为 **0x40**。

*   **警报 (Alert) 功能:** INA226 的 `ALERT` 引脚 (pin 6) 并未悬空。它通过一个由电阻 R4 (10kΩ) 和电容 C6 (100pF) 组成的 RC 滤波网络后，连接至板上的一个测试点 `TP_ALT`。此信号并未连接至数字隔离器或主控接口 (J1)，因此该警报功能默认无法通过 Grove 接口直接被主控捕获，但保留了在 PCB 上进行调试或扩展的可能性。

*   **输入保护细节:** 用于输入过压保护的 TVS 二极管 (D1) 型号为 `SMF30A`。其 30V 的额定反向关断电压与模块宣称的 0-30V 电压测量范围相匹配，为电压测量总线 `VBUS` 提供了有效的瞬态电压抑制保护。

*   **分流电阻标识:** 用于电流测量的 80mΩ 精密电阻 (R3) 在原理图上同时被标注为 `R_SHUNT`。

*   **数字隔离器供电:** 数字隔离器 U1 (CA-IS3020S) 的两侧供电是严格分开的。其主控侧的 VCC1 (pin 1) 和 GND1 (pin 4) 连接至 J1 接口输入的 5V 和 GND。其隔离侧的 VCC2 (pin 8) 和 GND2 (pin 5) 连接至隔离电源模块 U2 输出的 VCC_ISO 和 GND_ISO。这种独立的供电方式是实现 I2C 信号 galvanic 隔离的关键。

---

*该文档由 AI 自动生成，生成时间: 2025-11-18 03:23:40*
