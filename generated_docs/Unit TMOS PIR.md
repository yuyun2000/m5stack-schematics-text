# Unit TMOS PIR 原理图描述

---

## 原理图分析

### M5Stack Unit TMOS PIR (U185) 原理图描述

#### 主要芯片及其功能
- **U1 (STHS34PF80)**: 电路的核心组件，为一款高性能红外（IR）传感器。它集成了热电堆传感器阵列，能够基于黑体辐射原理实现非接触式温度测量、人体存在检测以及运动识别。该芯片通过 I2C 接口与主控通信。

#### 电路设计思想
该单元的设计目标是通过一个紧凑的模块，将 STHS34PF80 红外传感器的功能通过标准的 Grove (HY2.0-4P) 接口提供给 M5Stack 主控或其他微控制器。电路包含了传感器所需的核心外围元件、电源稳压电路和 I2C 通信接口电路，构成一个即插即用的传感单元。

#### 供电与充电电路
- **供电来源**: 电路通过 HY2.0-4P 接口（J1）的 5V 引脚获取外部电源。
- **电源稳压**: 外部输入的 5V 电压首先经过一颗低压差线性稳压器（LDO），型号为 ME6211，将其降压并稳定至 3.3V，为整个电路（包括 STHS34PF80 芯片）提供工作电压（VDD_3V3）。
- **滤波电容**: 在 LDO 的输入端（5V）和输出端（3.3V）分别配置了 C1 和 C2 电容（均为 1μF），用于电源滤波和稳定，确保为传感器提供纯净的电源。

#### 信号路径
- **I2C 信号**: I2C 通信信号（SCL 和 SDA）从 HY2.0-4P 接口（J1）引入，直接连接到 STHS34PF80 芯片（U1）的 SCL（Pin 3）和 SDA（Pin 4）引脚。
- **温度补偿信号**: NTC 热敏电阻（RT1）与固定电阻（R3）串联分压后，连接到 STHS34PF80 的 NTC_IN（Pin 7）引脚，为传感器提供环境温度参考，用于内部算法的温度补偿。

#### 外设模块
- **J1 (HY2.0-4P)**: 作为电路与外部主控连接的唯一接口，提供电源（5V/GND）和 I2C 通信（SCL/SDA）功能，端口类型为 PORT.A。

#### 逻辑电路
- **I2C 上拉**: SCL 和 SDA 信号线上各连接了一个 4.7kΩ 的上拉电阻（R1, R2），将总线电平上拉至 3.3V。这是 I2C 协议开漏输出结构所必需的，确保总线在空闲状态时为高电平。
- **传感器配置**:
    - **PDN (Power-down)**: U1 的 PDN（Pin 8）引脚通过一个 10kΩ 电阻（R4）下拉至 GND，使传感器默认处于工作状态。
    - **INT (Interrupt)**: U1 的 INT（Pin 5）引脚未连接（NC），中断功能在此硬件设计中未使用。

#### 串口与通讯芯片
- **通讯协议**: 电路使用 I2C 总线进行通信。
- **通讯芯片**: STHS34PF80 (U1) 自身集成了 I2C 从机接口，直接负责与主控的数据交换。其 I2C 地址固定为 0x5A。

#### 电平转换
- 本电路不包含独立的电平转换芯片。通过 LDO 将输入电压转换为 3.3V，使得整个单元的工作电平统一为 3.3V，可直接与 3.3V I/O 电平的微控制器（如 M5Stack 系列主控）兼容。

#### 电源管理
- **稳压管理**: 主要由 ME6211 LDO 芯片负责，将不稳定的 5V 输入转换为稳定的 3.3V 工作电压。
- **功耗管理**: STHS34PF80 的 PDN 引脚被硬件下拉至地，使设备上电后即进入正常工作模式。

#### 电路之间的连接关系
1.  **电源链路**: J1 的 5V 和 GND 引脚为 ME6211 LDO 提供输入。LDO 输出的 3.3V 电压作为 VDD_3V3，为 STHS34PF80 (U1)、I2C 上拉电阻（R1, R2）以及 NTC 温度补偿电路（RT1, R3）供电。
2.  **通信链路**: J1 的 SCL 和 SDA 引脚分别与 U1 的 SCL 和 SDA 引脚相连，并通过上拉电阻 R1 和 R2 连接到 VDD_3V3。
3.  **传感器外围电路**:
    - U1 的 VDD（Pin 2）引脚旁放置了去耦电容 C4 (0.1μF)。
    - U1 的 V_REF（Pin 6）引脚连接了参考电容 C3 (1μF) 到地，以稳定内部参考电压。
    - U1 的 NTC_IN（Pin 7）引脚连接到由 RT1 和 R3 构成的分压电路中点，用于采集环境温度。

---

## 补充信息

好的，基于对原理图的进一步分析，以下为补充说明：

### 补充说明

1.  **温度补偿电路细节**:
    -   用于温度补偿的电路是由一个 10kΩ 的 NTC (负温度系数) 热敏电阻 (RT1) 和一个 10kΩ 的精密电阻 (R3) 串联构成的分压电路。该电路的输出电压连接到 STHS34PF80 的 `NTC_IN` 引脚，为芯片提供了精确的环境温度参考，以补偿热电堆传感器因环境温度变化而产生的漂移。

2.  **电源去耦设计**:
    -   除了 LDO 输入/输出端的滤波电容 C1 和 C2 外，在 STHS34PF80 芯片的 `VDD` 供电引脚（Pin 2）旁还紧密放置了一个 100nF (0.1μF) 的旁路电容 C4。这是一个关键的设计实践，用于滤除高频噪声，为传感器内核提供一个稳定、纯净的局部电源，确保其模拟测量的精度。

3.  **默认工作模式**:
    -   `PDN` (Power-down) 引脚通过 R4 电阻下拉至地，确保模块上电后，STHS34PF80 芯片默认处于激活状态 (Active Mode)，而非掉电模式。这使得用户无需额外操作即可通过 I2C 访问传感器。

4.  **数据读取方式**:
    -   `INT` (Interrupt) 引脚在设计中被悬空 (NC)，未连接至 Grove 接口。这表明该硬件设计强制用户通过 I2C 总线轮询 (Polling) 的方式来查询传感器数据（如温度或运动状态），而不是利用中断驱动的方式来获取事件通知。

---

*该文档由 AI 自动生成，生成时间: 2025-11-18 03:05:39*
