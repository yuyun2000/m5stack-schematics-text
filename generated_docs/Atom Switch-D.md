# Atom Switch-D 原理图描述

---

## 原理图分析

### Atom Switch-D 原理图描述

#### 1. 电源电路

##### 1.1 交流供电与转换
*   **AC 输入**: 交流电源（110~250V）通过 `J5` (VH3.96-2P) 接口输入，包含火线 `L_IN` 和零线 `N_IN`。
*   **保险与保护**: 输入端串联了一颗 3.15A/250V 的保险丝 `F1` 和一个压敏电阻 `RV1` 用于过压和浪涌保护。
*   **AC-DC 降压**: 交流电经由 AC-DC 模块 `U2` (SP-5V1A) 进行转换，输出稳定的直流 `+5V` 电源，为整个系统的逻辑部分供电。该模块具备短路和过热保护功能。

##### 1.2 直流供电与转换
*   **DC 输入**: `J4` (VH3.96-4P) 接口的 `DC_IN` 引脚支持 9~24V 的直流电源输入。
*   **DC-DC 降压**: 输入的直流电压通过 `U3` (ME3116AM6G) 降压芯片转换为 `+5V`。该电路为系统提供了备选的直流供电方案。

##### 1.3 电源分配
*   **5V 电源轨**: 由 AC-DC 或 DC-DC 模块产生的 `+5V` 电源，为 ATOM 主控、`SP485EE` 芯片、继电器线圈驱动电路以及 PORT.A 接口供电。
*   **3.3V 电源轨**: 由 ATOM 主控内部 LDO 提供，通过主控接口引出。

#### 2. 主控接口
*   **ATOM 连接器**: 板载标准 ATOM 接口插座，用于连接 ATOM 系列主控。
*   **信号引脚**:
    *   `G19`: 连接至 `SP485EE` 的 `RO` (接收数据输出) 引脚。
    *   `G21`: 同时连接至 `SP485EE` 的 `DE` 和 `/RE` (驱动/接收使能) 引脚，以及 PORT.A 的 `SCL` 引脚。
    *   `G22`: 连接至 `SP485EE` 的 `DI` (驱动器数据输入) 引脚。
    *   `G23`: 作为 `RELAY2` 控制信号，驱动继电器 `K2`。
    *   `G25`: 连接至 PORT.A 的 `SDA` 引脚。
    *   `G33`: 作为 `RELAY1` 控制信号，驱动继电器 `K1`。
    *   `5V`, `3V3`, `GND`: 为主控提供电源和接地。

#### 3. 继电器控制电路
*   **继电器**: 板载两路继电器 `K1` 和 `K2` (HFD4/5-S)，额定参数为 250VAC/5A。
*   **驱动电路**:
    *   ATOM 的 `G33` (RELAY1) 和 `G23` (RELAY2) 引脚通过 1kΩ 限流电阻分别控制 NPN 型三极管 `Q2` 和 `Q1` 的基极。
    *   三极管导通时，`+5V` 电源流过继电器线圈，使其吸合。
    *   每个继电器线圈两端都并联了一个 `1N4148` 续流二极管 (`D4`, `D3`)，用于在三极管截止时吸收线圈产生的反向电动势，保护驱动三极管。
*   **负载连接**:
    *   交流输入火线 `L_IN` 直接连接到两个继电器的常开 (`NO`) 触点。
    *   继电器的公共 (`COM`) 触点分别引出至输出端子 `J6` (VH3.96-3P) 的 `L_OUT1` 和 `L_OUT2`。
    *   交流输入零线 `N_IN` 直接连接到输出端子 `J6` 的 `N_OUT`。
    *   通过控制继电器 `K1` 和 `K2` 的通断，实现对两路交流负载的独立开关控制。

#### 4. RS485 通讯电路
*   **核心芯片**: 采用 `SP485EE` (`U1`) 作为 RS485 收发器。
*   **信号路径**:
    *   ATOM 的 `G22` (TX) 引脚连接到 `SP485EE` 的 `DI` (数据输入) 引脚。
    *   `SP485EE` 的 `RO` (数据输出) 引脚连接到 ATOM 的 `G19` (RX) 引脚。
*   **收发控制**: `SP485EE` 的驱动使能 (`DE`) 和接收使能 (`/RE`) 引脚并联，由 ATOM 的 `G21` 引脚统一控制，实现半双工通讯的收发切换。
*   **总线接口**: RS485 差分信号 `A` 和 `B` 连接至 `J4` (VH3.96-4P) 接口，与 `DC_IN` 和 `GND` 一同引出，用于连接外部 RS485 总线。

#### 5. 外设接口 (PORT.A)
*   **接口类型**: 板载一个 `HY2.0-4P` 接口，定义为 PORT.A。
*   **引脚定义**:
    *   `SCL`: 连接至 ATOM 的 `G21` 引脚。
    *   `SDA`: 连接至 ATOM 的 `G25` 引脚。
    *   `5V`: 提供 `+5V` 电源。
    *   `GND`: 提供接地。
*   **功能**: 该接口主要用于扩展 I2C 设备或作为通用 I/O 口使用。由于 `SCL` (G21) 与 RS485 的使能控制引脚复用，I2C 功能与 RS485 功能在同一时间下存在冲突，不能同时使用。

---

## 补充信息

基于已提供的原理图信息，之前的描述已全面覆盖了核心的电路结构和连接关系。以下是对该原理图中一些关键设计要点和功能特性的补充说明：

*   **引脚复用与功能限制**:
    *   主控的 `G21` 引脚被同时用于两个不同的功能：RS485 收发器的使能控制 (`DE`/`/RE`) 和 PORT.A 接口的 I2C 时钟线 (`SCL`)。
    *   这意味着 RS485 通讯功能和 PORT.A 的 I2C 功能在硬件上是互斥的，不能同时使用。用户在使用时需要根据应用场景，通过软件配置 `G21` 引脚作为普通 GPIO 输出（用于控制 RS485）或 I2C SCL 功能。

*   **双路供电设计**:
    *   该模块提供了两种独立的供电路径：一是通过 `J5` 接口输入交流电，经板载 AC-DC 模块降压至 5V；二是通过 `J4` 接口输入 9~24V 直流电，经板载 DC-DC 芯片降压至 5V。
    *   这种设计增强了产品的适用性，使其既能直接接入市电环境，也能集成在低压直流供电的工业控制系统中。

*   **电路隔离特性**:
    *   继电器 `K1` 和 `K2` 在物理上实现了控制电路与负载电路的电气隔离（Galvanic Isolation）。
    *   低压控制侧（ATOM 主控、驱动电路、5V 逻辑）与高压负载侧（110~250V AC）之间没有电气连接，仅通过继电器内部的电磁-机械结构进行耦合。这确保了低压控制部分的安全，并有效抑制了高压负载侧对控制信号的干扰。

*   **驱动电路的健壮性**:
    *   在每个继电器驱动三极管的集电极与发射极之间（即继电器线圈两端）并联的续流二极管 (`D3`, `D4`) 是一个标准且必要的设计。它能在线圈断电时为其存储的磁场能量提供一个释放回路，防止产生的高压反向电动势击穿驱动三极管，从而提高了电路的可靠性和寿命。

---

*该文档由 AI 自动生成，生成时间: 2025-11-17 18:44:24*
